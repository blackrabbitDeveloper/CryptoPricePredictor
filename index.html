<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CryptoPricePredictor — BTC / ETH / SOL</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3935883771879302"
     crossorigin="anonymous"></script>
</head>
<body>

  <!-- Ambient background -->
  <div class="bg-grid"></div>
  <div class="bg-glow bg-glow--1"></div>
  <div class="bg-glow bg-glow--2"></div>
  <div class="bg-glow bg-glow--3"></div>

  <header class="header">
    <div class="header__brand">
      <div class="logo">
        <svg width="36" height="36" viewBox="0 0 36 36" fill="none">
          <rect width="36" height="36" rx="10" fill="url(#lg)"/>
          <path d="M10 26V10l8 10 8-10v16" stroke="#fff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          <defs><linearGradient id="lg" x1="0" y1="0" x2="36" y2="36"><stop stop-color="#6366f1"/><stop offset="1" stop-color="#06b6d4"/></linearGradient></defs>
        </svg>
      </div>
      <div>
        <h1 class="header__title">CryptoPricePredictor</h1>
        <p class="header__sub">BTC · ETH · SOL — 실시간 시세 &amp; 기술적 예측</p>
      </div>
    </div>
    <div class="header__status">
      <span class="pulse" id="pulse"></span>
      <span id="status-text">연결 중...</span>
    </div>
  </header>

  <main class="main">

    <!-- ===== Tab Navigation ===== -->
    <nav class="tab-nav" id="tab-nav">
      <button class="tab-btn tab-btn--active" data-tab="main">💎 메인 코인</button>
      <button class="tab-btn" data-tab="alt">🔥 핫 알트코인</button>
    </nav>

    <!-- ===== TAB: Main Coins ===== -->
    <div class="tab-content" id="tab-main">

    <!-- ===== Summary Cards ===== -->
    <section class="summary-cards" id="summary-cards">
      <!-- BTC -->
      <div class="scard scard--loading" data-coin="BTC">
        <div class="scard__top">
          <div class="scard__icon scard__icon--btc">₿</div>
          <div class="scard__info">
            <h2 class="scard__name">Bitcoin</h2>
            <span class="scard__pair">BTC / USDT</span>
          </div>
          <div class="scard__badge" id="btc-change">—</div>
        </div>
        <div class="scard__price" id="btc-price">$—</div>
        <div class="scard__preds">
          <div class="sp"><span class="sp__label">1분 예측</span><span class="sp__val" id="btc-p1m">—</span><span class="sp__pct" id="btc-p1m-pct"></span></div>
          <div class="sp-div"></div>
          <div class="sp"><span class="sp__label">1일 예측</span><span class="sp__val" id="btc-p1d">—</span><span class="sp__pct" id="btc-p1d-pct"></span></div>
        </div>
        <div class="scard__indicators" id="btc-indicators">—</div>
        <button class="scard__expand" data-target="BTC" title="상세 차트 보기">차트 열기 ▾</button>
      </div>
      <!-- ETH -->
      <div class="scard scard--loading" data-coin="ETH">
        <div class="scard__top">
          <div class="scard__icon scard__icon--eth">Ξ</div>
          <div class="scard__info">
            <h2 class="scard__name">Ethereum</h2>
            <span class="scard__pair">ETH / USDT</span>
          </div>
          <div class="scard__badge" id="eth-change">—</div>
        </div>
        <div class="scard__price" id="eth-price">$—</div>
        <div class="scard__preds">
          <div class="sp"><span class="sp__label">1분 예측</span><span class="sp__val" id="eth-p1m">—</span><span class="sp__pct" id="eth-p1m-pct"></span></div>
          <div class="sp-div"></div>
          <div class="sp"><span class="sp__label">1일 예측</span><span class="sp__val" id="eth-p1d">—</span><span class="sp__pct" id="eth-p1d-pct"></span></div>
        </div>
        <div class="scard__indicators" id="eth-indicators">—</div>
        <button class="scard__expand" data-target="ETH" title="상세 차트 보기">차트 열기 ▾</button>
      </div>
      <!-- SOL -->
      <div class="scard scard--loading" data-coin="SOL">
        <div class="scard__top">
          <div class="scard__icon scard__icon--sol">◎</div>
          <div class="scard__info">
            <h2 class="scard__name">Solana</h2>
            <span class="scard__pair">SOL / USDT</span>
          </div>
          <div class="scard__badge" id="sol-change">—</div>
        </div>
        <div class="scard__price" id="sol-price">$—</div>
        <div class="scard__preds">
          <div class="sp"><span class="sp__label">1분 예측</span><span class="sp__val" id="sol-p1m">—</span><span class="sp__pct" id="sol-p1m-pct"></span></div>
          <div class="sp-div"></div>
          <div class="sp"><span class="sp__label">1일 예측</span><span class="sp__val" id="sol-p1d">—</span><span class="sp__pct" id="sol-p1d-pct"></span></div>
        </div>
        <div class="scard__indicators" id="sol-indicators">—</div>
        <button class="scard__expand" data-target="SOL" title="상세 차트 보기">차트 열기 ▾</button>
      </div>
    </section>

    </div><!-- /tab-main -->

    <!-- ===== TAB: Hot Altcoins ===== -->
    <div class="tab-content" id="tab-alt" style="display:none;">
      <section class="alt-panel">
        <div class="alt-panel__header">
          <h3 class="panel-title">🔥 실시간 핫 알트코인 Top 12</h3>
          <div class="alt-controls">
            <div class="alt-sort-group" id="alt-sort-group">
              <button class="alt-sort-btn alt-sort-btn--active" data-sort="gainers">급등 🚀</button>
              <button class="alt-sort-btn" data-sort="losers">급락 📉</button>
              <button class="alt-sort-btn" data-sort="volume">거래량 💰</button>
            </div>
            <button class="alt-refresh-btn" id="alt-refresh-btn" title="새로고침">↻</button>
          </div>
        </div>
        <p class="alt-panel__desc">Binance USDT 페어 중 24시간 기준으로 가장 핫한 알트코인을 자동 탐지합니다. 스테이블코인·레버리지 토큰 제외.</p>
        <div class="alt-grid" id="alt-grid">
          <div class="alt-loading">알트코인 스캔 중...</div>
        </div>
        <p class="alt-panel__note">30초마다 자동 갱신 · 클릭하면 상세 예측을 확인할 수 있습니다.</p>
      </section>

      <!-- Alt Detail Modal -->
      <section class="alt-detail" id="alt-detail" style="display:none;">
        <div class="alt-detail__header">
          <div class="alt-detail__coin">
            <span class="alt-detail__icon" id="ad-icon">🪙</span>
            <h3 id="ad-title">—</h3>
            <span class="alt-detail__pair" id="ad-pair">— / USDT</span>
            <span class="alt-detail__badge" id="ad-change">—</span>
          </div>
          <button class="detail-panel__close" id="ad-close" title="닫기">✕</button>
        </div>
        <div class="alt-detail__body">
          <div class="alt-detail__price" id="ad-price">$—</div>
          <div class="alt-detail__stats" id="ad-stats"></div>
          <canvas id="ad-chart" height="220"></canvas>
          <div class="alt-detail__preds" id="ad-preds"></div>
        </div>
      </section>
    </div><!-- /tab-alt -->

    <!-- ===== Detail Chart Panel (Main tab, moved outside tab for visibility) ===== -->
    <!-- Note: detail-panel works globally across both tabs -->

    <!-- ===== Detail Chart Panel ===== -->
    <section class="detail-panel" id="detail-panel" style="display:none;">
      <div class="detail-panel__header">
        <div class="detail-panel__coin">
          <span class="detail-panel__icon" id="dp-icon"></span>
          <h3 id="dp-title">Bitcoin</h3>
          <span class="detail-panel__pair" id="dp-pair">BTC / USDT</span>
        </div>
        <div class="detail-panel__controls">
          <div class="tf-group" id="tf-group">
            <button class="tf-btn" data-tf="1m">1분</button>
            <button class="tf-btn tf-btn--active" data-tf="1h">1시간</button>
            <button class="tf-btn" data-tf="1d">1일</button>
          </div>
          <div class="overlay-group">
            <label class="overlay-toggle"><input type="checkbox" id="ov-ema" checked /><span>EMA</span></label>
            <label class="overlay-toggle"><input type="checkbox" id="ov-bb" checked /><span>BB</span></label>
            <label class="overlay-toggle"><input type="checkbox" id="ov-vol" /><span>VOL</span></label>
          </div>
          <button class="detail-panel__close" id="dp-close" title="닫기">✕</button>
        </div>
      </div>
      <div class="detail-panel__body">
        <canvas id="detail-chart"></canvas>
      </div>
      <div class="detail-panel__footer">
        <div class="detail-stats" id="detail-stats"></div>
      </div>
    </section>

    <!-- ===== Prediction Confidence ===== -->
    <section class="confidence-panel" id="confidence-panel">
      <h3 class="panel-title">🎯 예측 신뢰도 대시보드</h3>
      <div class="conf-grid" id="conf-grid"></div>
    </section>

    <!-- ===== Prediction History ===== -->
    <section class="history-panel" id="history-panel">
      <div class="history-panel__header">
        <h3 class="panel-title">📜 예측 히스토리</h3>
        <div class="history-controls">
          <select id="history-coin" class="history-select">
            <option value="ALL">전체</option>
            <option value="BTC">BTC</option>
            <option value="ETH">ETH</option>
            <option value="SOL">SOL</option>
          </select>
          <button id="history-clear" class="history-clear-btn" title="기록 초기화">초기화</button>
        </div>
      </div>
      <div class="history-summary" id="history-summary"></div>
      <div class="history-table-wrap">
        <table class="history-table" id="history-table">
          <thead>
            <tr>
              <th>시간</th>
              <th>코인</th>
              <th>당시 가격</th>
              <th>1분 예측</th>
              <th>1분 실제</th>
              <th>1분 결과</th>
              <th>1일 예측</th>
              <th>1일 실제</th>
              <th>1일 결과</th>
            </tr>
          </thead>
          <tbody id="history-body"></tbody>
        </table>
      </div>
      <p class="history-note">최근 100건 저장 · 1분 예측은 ~60초 후, 1일 예측은 ~24시간 후 실제 가격과 자동 비교됩니다.</p>
    </section>

    <!-- ===== Algorithm Info ===== -->
    <section class="info-panel">
      <h3 class="panel-title">📐 고도화 예측 알고리즘 (v2)</h3>
      <div class="info-panel__grid">
        <div class="info-item">
          <span class="info-item__icon">📈</span>
          <div><strong>EMA (8/21/50)</strong><p>지수이동평균 3단 크로스오버로 단기·중기·장기 추세를 동시에 포착합니다.</p></div>
        </div>
        <div class="info-item">
          <span class="info-item__icon">📊</span>
          <div><strong>RSI (14)</strong><p>Wilder 방식 상대강도지수로 과매수(70+)/과매도(30-) 신호를 반영합니다.</p></div>
        </div>
        <div class="info-item">
          <span class="info-item__icon">🔀</span>
          <div><strong>MACD (12/26/9)</strong><p>MACD 히스토그램 부호와 크기로 모멘텀 전환 강도를 측정합니다.</p></div>
        </div>
        <div class="info-item">
          <span class="info-item__icon">📉</span>
          <div><strong>볼린저 밴드 (20,2σ)</strong><p>가격이 상·하밴드에 근접할수록 반전 확률을 높여 예측에 반영합니다.</p></div>
        </div>
        <div class="info-item">
          <span class="info-item__icon">⚡</span>
          <div><strong>스토캐스틱 (14,3)</strong><p>%K/%D 크로스로 추가적인 과매수/과매도 확인 신호를 제공합니다.</p></div>
        </div>
        <div class="info-item">
          <span class="info-item__icon">🔥</span>
          <div><strong>ATR 변동성 스케일링</strong><p>Average True Range로 변동성에 비례하여 예측 변화폭을 자동 조절합니다.</p></div>
        </div>
        <div class="info-item">
          <span class="info-item__icon">⚖️</span>
          <div><strong>평균 회귀 (30일)</strong><p>30일 SMA 대비 이격도를 반영해 극단적 이탈을 보정합니다.</p></div>
        </div>
        <div class="info-item">
          <span class="info-item__icon">🧮</span>
          <div><strong>가중 앙상블</strong><p>7개 시그널을 신뢰도 가중 합산하여 최종 1분/1일 예측값을 산출합니다.</p></div>
        </div>
      </div>
      <p class="info-panel__disclaimer">⚠️ 본 예측은 기술적 분석 기반이며 투자 조언이 아닙니다. 실제 투자 판단은 전문가 상담 후 결정하세요.</p>
    </section>
  </main>

  <footer class="footer">
    <p>Data by <a href="https://www.binance.com" target="_blank" rel="noopener">Binance Public API</a> · GitHub Pages Static Deploy · v2.1</p>
  </footer>

  <script src="app.js"></script>
</body>
</html>
